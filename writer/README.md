# SpeedFogWriter

C# component of SpeedFog that generates Elden Ring mod files from `graph.json`.

## Requirements

- .NET 8.0 SDK
- Elden Ring game files (regulation.bin, MSBs, EMEVDs)
- Data files from `../data/` (fog_data.json, clusters.json, etc.)

## Building

```bash
cd writer
dotnet build
```

## Usage

```bash
dotnet run --project SpeedFogWriter -- <graph.json> <game_dir> <output_dir> [--data-dir <path>]
```

### Arguments

- `graph.json` - Path to graph generated by speedfog-core (Phase 2)
- `game_dir` - Path to Elden Ring's Game folder (contains regulation.bin)
- `output_dir` - Where to write mod files

### Options

- `--data-dir` - Custom path to data directory (default: ../data)

## Output

Creates ModEngine 2-compatible mod structure:

```
output/
└── mods/
    └── speedfog/
        ├── param/gameparam/regulation.bin
        ├── event/*.emevd.dcx
        └── map/mapstudio/*.msb.dcx
```

## Development

See `docs/plans/phase-3-csharp-writer.md` for detailed implementation spec.

### Running Tests

```bash
cd writer/test
./run_integration.sh
```
